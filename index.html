<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decision Hub</title>
</head>
<body>
    <h2>意思決定支援アプリ「順位付けさん」</h2>
    <form id="addOptionForm">
        <label for="option">選択肢：</label>
        <input type="text" id="option" name="option">
        <button type="button" onclick="addOption()">追加</button>
    </form>
    
    <ul id="optionsList"></ul>

    <button type="button" onclick="compareOptions()">比較</button>
    <br>
    <br>

    <div id="comparisonContainer" style="display: none;">
        <p>比較中：</p>
        <p id="comparisonText"></p>
        <button type="button" onclick="declareWinner(0)">一番目の選択肢が勝ち</button>
        <button type="button" onclick="declareWinner(1)">二番目の選択肢が勝ち</button>
    </div>

    <h2>順位：</h2>
    <ol id="priorityOrder"></ol>

    <script>
        var options = [];

        function addOption() {
            var optionInput = document.getElementById("option");
            var option = optionInput.value.trim();
            if (option !== "") {
                options.push(option);
                optionInput.value = "";
                renderOptions();
            }
        }

        function renderOptions() {
            var optionsList = document.getElementById("optionsList");
            optionsList.innerHTML = "";
            options.forEach(function(option, index) {
                var listItem = document.createElement("li");
                listItem.textContent = option;
                var deleteButton = document.createElement("button");
                deleteButton.textContent = "×";
                deleteButton.setAttribute("onclick", "deleteOption(" + index + ")");
                listItem.appendChild(deleteButton);
                optionsList.appendChild(listItem);
            });
        }

        function deleteOption(index) {
            options.splice(index, 1);
            renderOptions();
        }

        function compareOptions() {
            if (options.length < 2) {
                alert("比較するには少なくとも2つの選択肢が必要です。");
                return;
            }

            var comparisonContainer = document.getElementById("comparisonContainer");
            comparisonContainer.style.display = "block";

            var comparisonText = document.getElementById("comparisonText");
            comparisonText.textContent = options[0] + " vs " + options[1];
        }

        function declareWinner(winnerIndex) {
            var winner = options[winnerIndex];
            var loser = options[1 - winnerIndex];
            options.splice(winnerIndex, 1); // 勝者を選択肢から削除
            options.splice(0, 1); // 最初の要素を削除（すでに比較済み）
            options.push(winner); // 勝者を末尾に追加
            options.unshift(loser); // 敗者を先頭に追加
            renderOptions();

            var priorityOrder = document.getElementById("priorityOrder");
            var listItem = document.createElement("li");
            listItem.textContent = winner;
            priorityOrder.appendChild(listItem);

            var comparisonContainer = document.getElementById("comparisonContainer");
            comparisonContainer.style.display = "none";

            if (options.length >= 2) {
                compareOptions();
            } else {
                var addOptionForm = document.getElementById("addOptionForm");
                addOptionForm.style.display = "none";
            }
        }
    </script>
</body>
</html>
